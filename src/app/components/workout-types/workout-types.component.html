<div class="workout-types-container">
  <header class="page-header">
    <a routerLink="/profile" class="back-btn">‚Äπ</a>
    <h2>Workout Types</h2>
    <button class="add-btn" (click)="openCreateModal()">+</button>
  </header>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Loading workout types...</p>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading && workoutTypes.length === 0">
    <div class="empty-icon">üèãÔ∏è</div>
    <h3>No Workout Types Yet</h3>
    <p>Create custom workout types to categorize your gym sessions</p>
    <button class="btn-primary" (click)="openCreateModal()">Create Your First Type</button>
  </div>

  <!-- Workout Types List -->
  <div class="types-list" *ngIf="!isLoading && workoutTypes.length > 0">
    <div 
      class="type-card" 
      *ngFor="let type of workoutTypes"
      (click)="openEditModal(type)"
    >
      <div class="type-icon" [style.background]="type.color + '20'" [style.color]="type.color">
        {{ type.icon || 'üèãÔ∏è' }}
      </div>
      <div class="type-info">
        <span class="type-name">{{ type.name }}</span>
        <span class="type-color-indicator" [style.background]="type.color"></span>
      </div>
      <button class="delete-btn" (click)="openDeleteConfirm(type); $event.stopPropagation()">
        üóëÔ∏è
      </button>
    </div>
  </div>
</div>

<!-- Create/Edit Modal -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ modalMode === 'create' ? 'Create' : 'Edit' }} Workout Type</h3>
      <button class="close-btn" (click)="closeModal()">√ó</button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label>Name</label>
        <input 
          type="text" 
          [(ngModel)]="typeName" 
          placeholder="e.g., Weight Training"
          maxlength="30"
        />
      </div>

      <div class="form-group">
        <label>Icon</label>
        <div class="icon-grid">
          <button 
            *ngFor="let icon of icons"
            class="icon-btn"
            [class.selected]="typeIcon === icon"
            (click)="selectIcon(icon)"
          >
            {{ icon }}
          </button>
        </div>
      </div>

      <div class="form-group">
        <label>Color</label>
        <div class="color-grid">
          <button 
            *ngFor="let color of colors"
            class="color-btn"
            [style.background]="color"
            [class.selected]="typeColor === color"
            (click)="selectColor(color)"
          >
            <span *ngIf="typeColor === color">‚úì</span>
          </button>
        </div>
      </div>

      <div class="preview">
        <label>Preview</label>
        <div class="preview-card">
          <div class="preview-icon" [style.background]="typeColor + '20'" [style.color]="typeColor">
            {{ typeIcon }}
          </div>
          <span class="preview-name">{{ typeName || 'Workout Name' }}</span>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeModal()">Cancel</button>
      <button 
        class="btn-primary" 
        (click)="saveWorkoutType()" 
        [disabled]="!typeName.trim() || isSaving"
      >
        <span *ngIf="!isSaving">{{ modalMode === 'create' ? 'Create' : 'Save' }}</span>
        <span *ngIf="isSaving" class="loading-spinner"></span>
      </button>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal-overlay" *ngIf="showDeleteConfirm" (click)="closeDeleteConfirm()">
  <div class="modal delete-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Delete Workout Type?</h3>
    </div>

    <div class="modal-body">
      <p>Are you sure you want to delete <strong>{{ typeToDelete?.name }}</strong>?</p>
      <p class="warning">This action cannot be undone.</p>
    </div>

    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeDeleteConfirm()">Cancel</button>
      <button class="btn-danger" (click)="deleteWorkoutType()" [disabled]="isSaving">
        <span *ngIf="!isSaving">Delete</span>
        <span *ngIf="isSaving" class="loading-spinner"></span>
      </button>
    </div>
  </div>
</div>
