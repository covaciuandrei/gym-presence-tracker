<div class="workout-types-container">
  <header class="page-header">
    <a routerLink="/profile" class="back-btn">‚Äπ</a>
    <h2>{{ 'WORKOUT_TYPES.TITLE' | translate }}</h2>
    <button class="add-btn" (click)="openCreateModal()">+</button>
  </header>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>{{ 'WORKOUT_TYPES.LOADING' | translate }}</p>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading && workoutTypes.length === 0">
    <div class="empty-icon">üèãÔ∏è</div>
    <h3>{{ 'WORKOUT_TYPES.EMPTY_TITLE' | translate }}</h3>
    <p>{{ 'WORKOUT_TYPES.EMPTY_DESC' | translate }}</p>
    <button class="btn-primary" (click)="openCreateModal()">{{ 'WORKOUT_TYPES.CREATE_FIRST' | translate }}</button>
  </div>

  <!-- Workout Types List -->
  <div class="types-list" *ngIf="!isLoading && workoutTypes.length > 0">
    <div 
      class="type-card" 
      *ngFor="let type of workoutTypes"
      (click)="openEditModal(type)"
    >
      <div class="type-icon" [style.background]="type.color + '20'" [style.color]="type.color">
        {{ type.icon || 'üèãÔ∏è' }}
      </div>
      <div class="type-info">
        <span class="type-name">{{ type.name }}</span>
        <span class="type-color-indicator" [style.background]="type.color"></span>
      </div>
      <button class="delete-btn" (click)="openDeleteConfirm(type); $event.stopPropagation()">
        üóëÔ∏è
      </button>
    </div>
  </div>
</div>

<!-- Create/Edit Modal -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ (modalMode === 'create' ? 'WORKOUT_TYPES.CREATE_TITLE' : 'WORKOUT_TYPES.EDIT_TITLE') | translate }}</h3>
      <button class="close-btn" (click)="closeModal()">√ó</button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label>{{ 'WORKOUT_TYPES.NAME_LABEL' | translate }}</label>
        <input 
          type="text" 
          [(ngModel)]="typeName" 
          [placeholder]="'WORKOUT_TYPES.NAME_PLACEHOLDER' | translate"
          maxlength="30"
        />
      </div>

      <div class="form-group">
        <label>{{ 'WORKOUT_TYPES.ICON_LABEL' | translate }}</label>
        <div class="icon-grid">
          <button 
            *ngFor="let icon of icons"
            class="icon-btn"
            [class.selected]="typeIcon === icon"
            (click)="selectIcon(icon)"
          >
            {{ icon }}
          </button>
        </div>
      </div>

      <div class="form-group">
        <label>{{ 'WORKOUT_TYPES.COLOR_LABEL' | translate }}</label>
        <div class="color-grid">
          <button 
            *ngFor="let color of colors"
            class="color-btn"
            [style.background]="color"
            [class.selected]="typeColor === color"
            (click)="selectColor(color)"
          >
            <span *ngIf="typeColor === color">‚úì</span>
          </button>
        </div>
      </div>

      <div class="preview">
        <label>{{ 'WORKOUT_TYPES.PREVIEW_LABEL' | translate }}</label>
        <div class="preview-card">
          <div class="preview-icon" [style.background]="typeColor + '20'" [style.color]="typeColor">
            {{ typeIcon }}
          </div>
          <span class="preview-name">{{ typeName || ('WORKOUT_TYPES.PREVIEW_NAME' | translate) }}</span>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeModal()">{{ 'WORKOUT_TYPES.CANCEL_BTN' | translate }}</button>
      <button 
        class="btn-primary" 
        (click)="saveWorkoutType()" 
        [disabled]="!typeName.trim() || isSaving"
      >
        <span *ngIf="!isSaving">{{ (modalMode === 'create' ? 'WORKOUT_TYPES.CREATE_BTN' : 'WORKOUT_TYPES.SAVE_BTN') | translate }}</span>
        <span *ngIf="isSaving" class="loading-spinner"></span>
      </button>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal-overlay" *ngIf="showDeleteConfirm" (click)="closeDeleteConfirm()">
  <div class="modal delete-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ 'WORKOUT_TYPES.DELETE_TITLE' | translate }}</h3>
    </div>

    <div class="modal-body">
      <p [innerHTML]="'WORKOUT_TYPES.DELETE_CONFIRM' | translate:{name: typeToDelete?.name}"></p>
      <p class="warning">{{ 'WORKOUT_TYPES.DELETE_WARNING' | translate }}</p>
    </div>

    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeDeleteConfirm()">{{ 'WORKOUT_TYPES.CANCEL_BTN' | translate }}</button>
      <button class="btn-danger" (click)="deleteWorkoutType()" [disabled]="isSaving">
        <span *ngIf="!isSaving">{{ 'WORKOUT_TYPES.DELETE_BTN' | translate }}</span>
        <span *ngIf="isSaving" class="loading-spinner"></span>
      </button>
    </div>
  </div>
</div>
